{"version":3,"file":"index.js","sources":["../../src/createForm.jsx","../../src/reducer.js"],"sourcesContent":["import React, {Component} from 'react'\nimport PropTypes from 'prop-types'\nimport defaultTransformer from 'gateschema-transformer'\n\nfunction debounce(func, wait) {\n  let tId\n  return function() {\n    clearTimeout(tId)\n    tId = setTimeout(() => {\n      tId = null\n      func.apply(this, arguments)\n    }, wait)\n  }\n}\n\nexport function createForm(options = {}) {\n  const { StateForm, transformer = defaultTransformer } = options\n\n  class GateSchemaForm extends Component {\n    static contextTypes = {\n      store: PropTypes.object\n    }\n    static propTypes = {\n      schema: PropTypes.object.isRequired,\n      value: PropTypes.any,\n      name: PropTypes.string,\n      debounce: PropTypes.number,\n      ignoreErrors: PropTypes.object\n    }\n    constructor(props, context) {\n      super(props, context)\n      const {schema, value, name, debounce }  = props\n\n      this.cache = {}\n      this.errors = []\n      this.activePaths = {}\n      this.validationOptions = {\n          skipAsync: true,\n          useCache: true\n      }\n      this.pathValidationOptions = {}\n\n      this.state = {\n        schema: schema,\n        value: value,\n        formState: null\n      }\n\n      this.setValueOfFormPath = name \n        ? this.setValueOfFormPathViaRedux \n        : this.setValueOfFormPathDirectly\n\n      this.renderSchemaDebounced = debounce \n        ? debounce(this.renderSchema, debounce) \n        : this.renderSchema\n\n      if (props.schema) {\n        this.renderSchema()\n      }\n    }\n    setValueOfFormPathDirectly(path, value, parentValue, key) {\n      parentValue[key] = value\n    }\n    setValueOfFormPathViaRedux(path, value, parentValue, key) {\n      this.context.store.dispatch({\n        type: 'GATESCHEMA_FORM_INPUT_OF_PATH',\n        payload: {\n          name: this.props.name,\n          path,\n          value,\n          parentValue,\n          key\n        }\n      })\n    }\n    transformNode = (node, parentNode) => {\n      const {activePaths} = this\n      const {ignoreErrors} = this.props\n      const {path, error, value, constraints} = node\n      const {type, other = {}} = constraints\n      const form = other.form || {}\n\n      if (form.hidden) {\n        return\n      }\n      let errorMsg\n\n      // collect error\n      if (error && !ignoreErrors[error.keyword]) {\n        this.errors.push([path, error])\n        errorMsg = error.msg\n      }\n\n      const formItem =  Object.assign({}, form, {\n        path,\n        required: constraints.required,\n        error: (activePaths[path] && errorMsg) || undefined,\n        value,\n        children: node.children,\n        option: constraints.option\n      })\n\n\n      const componentMap = {\n        list: 'List',\n        map: 'Map',\n        string: 'Input',\n        number: 'InputNumber',\n        boolean: 'Switch',\n        enumList: 'Checkbox',\n        enum: 'Radio'\n      }\n\n      let component = formItem.component || (path === '/' ? 'Form' :  componentMap[type])\n\n\n      if (component === 'Select' && type === 'enumList') {\n        formItem.multiple = true\n      }\n\n      if (!formItem.label && parentNode && parentNode.constraints.type !== 'list') {\n        formItem.label = path.slice(path.lastIndexOf('/') + 1)\n      }\n\n      formItem.component = component\n\n      this.cache[path] = {\n        type,\n        item: formItem\n      }\n      return formItem\n    }\n    setFormState(formState) {\n      const state = this.state\n      const {schema, value} = state\n      if (state.formState == null) {\n        this.state = {\n          schema,\n          value,\n          formState\n        }\n      } else {\n        this.setState({\n          schema,\n          value,\n          formState\n        })\n      }\n    }\n    updateValue(path, value, noDebounce) {\n      const rootData = this.props.value\n      const keys = path.split('/').slice(1)\n      const length = keys.length\n      if (length === 0) {\n        return this.setValueOfFormPath('/', value)\n      }\n      let target = rootData || {}\n      if (target !== rootData) {\n        this.setValueOfFormPath('/', target)\n      }\n\n      const lastIndex = length - 1\n      let currentPath = ''\n      for(let i = 0; i < length; i++) {\n        const key = keys[i]\n        currentPath += ('/' + key)\n        if (i < lastIndex) {\n          let child = target[key]\n          if (child == null || typeof child !== 'object') {\n            child = this.cache[currentPath].type === 'list' ? [] : {}\n            this.setValueOfFormPath(currentPath, child, target, key)\n          }\n          target = child\n        } else {\n          this.setValueOfFormPath(currentPath, value, target, key)\n        }\n      }\n      return noDebounce ? this.renderSchema() : this.renderSchemaDebounced()\n    }\n    handleUserInput = (path, value, index) => {\n      let noDebounce = false\n      const type = this.cache[path].type\n      if (type === 'string' && value === '') {\n        value = undefined\n      } else if (type === 'list') {\n        noDebounce = true\n        if (typeof index !== 'undefined') {\n          const activePaths = this.activePaths\n          const newActivePaths = {}\n          const activePathsOfOldValue = []\n          const prefix = path + '/'\n          Object.keys(activePaths).forEach(key => {\n            if (key.indexOf(prefix) === 0) {\n              activePathsOfOldValue.push(key)\n            } else {\n              newActivePaths[key] = true\n            }\n          })\n          const regex = new RegExp('^' + path + '\\\\/(\\\\d)(\\\\/.*)?')\n          let match\n          let idx\n          let appendix\n          activePathsOfOldValue.forEach(oldKey => {\n            match = oldKey.match(regex)\n            idx = ~~match[1]\n            appendix = match[2] || ''\n            if (idx < index) {\n              newActivePaths[oldKey] = true\n            } else if (idx > index) {\n              newActivePaths[prefix + (idx - 1) + appendix] = true\n            }\n          })\n          this.activePaths = newActivePaths\n        }\n      }\n      this.activePaths[path] = true\n      this.pathValidationOptions = {\n        [path]: {\n          skipAsync: false\n        }\n      }\n      this.updateValue(path, value, noDebounce)\n    }\n    handleSubmit = () => {\n      const activePaths = this.activePaths\n      Object.keys(this.cache).forEach(key => {\n        activePaths[key] = true\n      })\n      this.renderSchema(() => {\n        if (this.errors.length === 0) {\n          this.props.onSubmit()\n        }\n      })\n    }\n    handleReset() {\n      this.props.onReset()\n    }\n    renderSchema = (cb) => {\n      const {value, schema} = this.state\n      this.errors = []\n      this.cache = {}\n      const options = {\n        path: '/',\n        value: value,\n        rootData: value,\n        validationOptions: this.validationOptions,\n        pathValidationOptions: this.pathValidationOptions,\n        transform: this.transformNode,\n      }\n      transformer.transform(schema, options, (formState) => {\n        this.setFormState(formState)\n        return cb && cb()\n      })\n    }\n    componentWillReceiveProps(nextProps) {\n      const props = this.props\n      const {value, schema} = nextProps\n      if (props.value !== value || props.schema !== schema) {\n        this.setState({\n          value: value,\n          schema: schema,\n          formState: this.state.formState\n        })\n        this.renderSchema()\n      }\n    }\n    shouldComponentUpdate(nextProps, nextState) {\n      if (this.state.formState === nextState.formState) {\n        return fasle\n      } \n      return true\n    }\n    render() {\n      const {handleSubmit, handleReset, handleUserInput, children} = this\n      const {formState} = this.state\n      return <StateForm \n        state={formState} \n        onSubmit={handleSubmit}\n        onReset={handleReset}\n        onInput={handleUserInput}\n      >\n        {children}\n      </StateForm>\n    }\n    created() {\n      if (this.name) {\n        const name = this.name\n        const mutationsName = vuexModuleName + '/setValueOfFormPath'\n        this.setValueOfFormPath = function(path, value, parentValue, key) {\n          this.$store.commit(mutationsName, {\n            name,\n            path,\n            value,\n            parentValue,\n            key\n          })\n        }\n      }\n\n      this.$watch('schema', {\n        deep: this.isDeepWatchSchema,\n        handler: this.renderSchema\n      })\n\n      this.renderSchemaDebounced = this.debounce \n        ? debounce(this.renderSchema, this.debounce) \n        : this.renderSchema\n      \n      if (this.schema) {\n        this.renderSchemaDebounced()\n      }\n    }\n  }\n  GateSchemaForm.defaultProps = {\n    ignoreErrors: {\n      map: true,\n      list: true\n    }\n  }\n\n  return GateSchemaForm\n}\n\nexport default createForm\n","export default function reducer(state = {}, action = {}) {\n  const {type, payload} = action\n  if (type === 'GATESCHEMA_FORM_INPUT_OF_PATH') {\n   const {name, path, value, parentValue, key} = payload \n   if (path === '/') {\n     return Object.assign({}, state, {\n       [name]: value\n     })\n   } else {\n     parentValue[key] = value\n     return Object.assign({}, state)\n   }\n  }\n  return state\n}"],"names":["debounce","func","wait","tId","clearTimeout","setTimeout","apply","arguments","createForm","options","StateForm","transformer","defaultTransformer","GateSchemaForm","props","context","node","parentNode","activePaths","ignoreErrors","path","error","value","constraints","type","other","form","hidden","errorMsg","keyword","errors","push","msg","formItem","Object","assign","required","undefined","children","option","componentMap","list","map","string","number","boolean","enumList","enum","component","multiple","label","slice","lastIndexOf","cache","item","index","noDebounce","newActivePaths","activePathsOfOldValue","prefix","keys","forEach","key","indexOf","regex","RegExp","match","idx","appendix","oldKey","pathValidationOptions","skipAsync","updateValue","renderSchema","length","onSubmit","cb","state","schema","rootData","validationOptions","transform","transformNode","formState","setFormState","name","useCache","setValueOfFormPath","setValueOfFormPathViaRedux","setValueOfFormPathDirectly","renderSchemaDebounced","parentValue","store","dispatch","payload","setState","split","target","lastIndex","currentPath","i","child","onReset","nextProps","nextState","fasle","handleSubmit","handleReset","handleUserInput","React","mutationsName","vuexModuleName","$store","commit","$watch","deep","isDeepWatchSchema","handler","Component","PropTypes","object","isRequired","any","defaultProps","reducer","action"],"mappings":"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"}